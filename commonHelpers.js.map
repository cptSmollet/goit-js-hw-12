{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '44503068-6cc3802f70205d42434a99aa5';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1) {\n  const response = await axios.get(`${BASE_URL}`, {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 15,\n      page: page,\n    },\n  });\n  return response.data;\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function renderImages(images) {\n  const gallery = document.querySelector('.gallery');\n  const markup = images\n    .map(\n      ({ webformatURL, largeImageURL, tags }) => `\n    <div class=\"photo-card\">\n      <a class=\"gallery__item\" href=\"${largeImageURL}\">\n        <img class=\"gallery__image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n      </a>\n      <div class=\"info\">\n        <p class=\"info-item\">${tags}</p>\n      </div>\n    </div>`\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  let lightbox = new SimpleLightbox('.gallery a');\n  lightbox.refresh();\n}\n\nexport function clearGallery() {\n  document.querySelector('.gallery').innerHTML = '';\n}\n\nexport function toggleLoadMoreButton(isVisible) {\n  const loadMoreButton = document.querySelector('#load-more');\n  loadMoreButton.classList.toggle('hidden', !isVisible);\n}","import { fetchImages } from './js/pixabay-api';\nimport { renderImages, clearGallery, toggleLoadMoreButton } from './js/render-functions';\n\nconst searchForm = document.querySelector('.search-form');\nconst loadMoreButton = document.querySelector('#load-more');\nconst gallery = document.querySelector('.gallery');\n\nlet query = '';\nlet page = 1;\nlet totalHits = 0;\n\nsearchForm.addEventListener('submit', onSearch);\nloadMoreButton.addEventListener('click', onLoadMore);\n\nasync function onSearch(event) {\n  event.preventDefault();\n  query = event.currentTarget.elements.searchQuery.value.trim();\n  page = 1;\n  clearGallery();\n  toggleLoadMoreButton(false);\n\n  if (query === '') {\n    return;\n  }\n\n  try {\n    const data = await fetchImages(query, page);\n    totalHits = data.totalHits;\n    if (totalHits > 0) {\n      renderImages(data.hits);\n      toggleLoadMoreButton(page < Math.ceil(totalHits / 15));\n    } else {\n      alert('No images found.');\n    }\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nasync function onLoadMore() {\n  page += 1;\n\n  try {\n    const data = await fetchImages(query, page);\n    renderImages(data.hits);\n    if (page >= Math.ceil(totalHits / 15)) {\n      toggleLoadMoreButton(false);\n      alert(\"We're sorry, but you've reached the end of search results.\");\n    }\n  } catch (error) {\n    console.error(error);\n  }\n\n  smoothScroll();\n}\n\nfunction smoothScroll() {\n  const { height: cardHeight } = gallery.firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}"],"names":["API_KEY","BASE_URL","fetchImages","query","page","axios","renderImages","images","gallery","markup","webformatURL","largeImageURL","tags","SimpleLightbox","clearGallery","toggleLoadMoreButton","isVisible","searchForm","loadMoreButton","totalHits","onSearch","onLoadMore","event","data","error","smoothScroll","cardHeight"],"mappings":"6vBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAOC,EAAO,EAAG,CAYjD,OAXiB,MAAMC,EAAM,IAAI,GAAGJ,CAAQ,GAAI,CAC9C,OAAQ,CACN,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAMC,CACP,CACL,CAAG,GACe,IAClB,CCfO,SAASE,EAAaC,EAAQ,CACnC,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAASF,EACZ,IACC,CAAC,CAAE,aAAAG,EAAc,cAAAC,EAAe,KAAAC,CAAM,IAAK;AAAA;AAAA,uCAEVD,CAAa;AAAA,2CACTD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,+BAGtCA,CAAI;AAAA;AAAA,WAG9B,EACA,KAAK,EAAE,EACVJ,EAAQ,mBAAmB,YAAaC,CAAM,EAE/B,IAAII,EAAe,YAAY,EACrC,QAAO,CAClB,CAEO,SAASC,GAAe,CAC7B,SAAS,cAAc,UAAU,EAAE,UAAY,EACjD,CAEO,SAASC,EAAqBC,EAAW,CACvB,SAAS,cAAc,YAAY,EAC3C,UAAU,OAAO,SAAU,CAACA,CAAS,CACtD,CC5BA,MAAMC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAiB,SAAS,cAAc,YAAY,EACpDV,EAAU,SAAS,cAAc,UAAU,EAEjD,IAAIL,EAAQ,GACRC,EAAO,EACPe,EAAY,EAEhBF,EAAW,iBAAiB,SAAUG,CAAQ,EAC9CF,EAAe,iBAAiB,QAASG,CAAU,EAEnD,eAAeD,EAASE,EAAO,CAO7B,GANAA,EAAM,eAAc,EACpBnB,EAAQmB,EAAM,cAAc,SAAS,YAAY,MAAM,OACvDlB,EAAO,EACPU,IACAC,EAAqB,EAAK,EAEtBZ,IAAU,GAId,GAAI,CACF,MAAMoB,EAAO,MAAMrB,EAAYC,EAAOC,CAAI,EAC1Ce,EAAYI,EAAK,UACbJ,EAAY,GACdb,EAAaiB,EAAK,IAAI,EACtBR,EAAqBX,EAAO,KAAK,KAAKe,EAAY,EAAE,CAAC,GAErD,MAAM,kBAAkB,CAE3B,OAAQK,EAAO,CACd,QAAQ,MAAMA,CAAK,CACpB,CACH,CAEA,eAAeH,GAAa,CAC1BjB,GAAQ,EAER,GAAI,CACF,MAAMmB,EAAO,MAAMrB,EAAYC,EAAOC,CAAI,EAC1CE,EAAaiB,EAAK,IAAI,EAClBnB,GAAQ,KAAK,KAAKe,EAAY,EAAE,IAClCJ,EAAqB,EAAK,EAC1B,MAAM,4DAA4D,EAErE,OAAQS,EAAO,CACd,QAAQ,MAAMA,CAAK,CACpB,CAEDC,GACF,CAEA,SAASA,GAAe,CACtB,KAAM,CAAE,OAAQC,CAAU,EAAKlB,EAAQ,kBAAkB,wBACzD,OAAO,SAAS,CACd,IAAKkB,EAAa,EAClB,SAAU,QACd,CAAG,CACH"}